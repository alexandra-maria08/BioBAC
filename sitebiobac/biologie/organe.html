<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link rel="manifest" href="/manifest.json">
<title>BioBAC â€“ LecÈ›ia: Organe È™i funcÈ›ii</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- Activare dark mode din localStorage -->
<script>
    if (localStorage.getItem('tema') === 'dark') {
      document.documentElement.classList.add('dark');
    }
</script>

<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #e8f5e9;
    padding: 20px;
    margin: 0;
    color: #000;
  }
  .container {
    max-width: 800px;
    background: white;
    padding: 20px;
    margin: auto;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    position: relative;
  }
  h1, h2 { color: #1b5e20; }
  ul { text-align: left; }
  .intrebare { margin: 15px 0; text-align: left; }
  .raspunsuri button {
    display: block;
    margin: 5px 0;
    padding: 8px;
    width: 100%;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
    background-color: #f0f0f0;
    color: #000;
  }
  .raspunsuri button.corect {
    background-color: #c8e6c9;
    color: #2e7d32;
    border: none;
  }
  .raspunsuri button.gresit {
    background-color: #ffcdd2;
    color: #c62828;
    border: none;
  }
  .feedback { font-weight: bold; margin-top: 10px; }
  input[type=text], select {
    width: 100%;
    padding: 8px;
    margin: 5px 0;
  }
  a.back {
    display: inline-block;
    margin-top: 20px;
    color: #1b5e20;
    font-weight: bold;
    text-decoration: none;
  }
  .rezultat {
    background-color: #fff9c4;
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
    font-size: 18px;
  }

  /* Google Translate container */
  #google_translate_element {
    position: absolute;
    top: 15px;
    right: 20px;
    z-index: 10;
    text-align: right;
  }

  /* DARK MODE */
  .dark body, .dark {
    background-color: #121212 !important;
    color: #e0e0e0 !important;
  }
  .dark .container {
    background-color: #1e1e1e !important;
    box-shadow: 0 0 10px rgba(255,255,255,0.1) !important;
  }
  .dark .raspunsuri button {
    background-color: #2c2c2c !important;
    color: white !important;
  }
  .dark .raspunsuri button.corect {
    background-color: #388e3c !important;
    color: white !important;
    border: none !important;
  }
  .dark .raspunsuri button.gresit {
    background-color: #d32f2f !important;
    color: white !important;
    border: none !important;
  }
  .dark .rezultat { background-color: #333 !important; }
  .dark a.back { color: #81c784 !important; }

  /* Google Translate styling */
  .goog-te-banner-frame.skiptranslate {
    display: none !important;
  }
  body { top: 0 !important; }

  #google_translate_element {
  margin-top: 5px;
}

#tts-button {
  background-color: #1b5e20;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 8px 16px;
  cursor: pointer;
  font-weight: bold;
  margin: 10px 0;
}
.dark #tts-button {
  background-color: #81c784;
  color: #121212;
}
</style>
</head>
<body>
<div class="container">

  <!-- Google Translate -->
  <div id="google_translate_element"></div>

  <div style="display: flex; justify-content: space-between; align-items: flex-start;">
  <button id="tts-button" title="AscultÄƒ teoria esenÈ›ialÄƒ">ğŸ”Š AscultÄƒ</button>
  <div id="google_translate_element"></div>
</div>

<h1>ğŸŒ± BioBAC â€“ LecÈ›ia: Organe È™i funcÈ›ii</h1>

  <h2>ğŸ§  Teorie esenÈ›ialÄƒ</h2>
  <div id="teorie-esentiala">
    <ul>
      <li>Organele sunt grupÄƒri de È›esuturi care Ã®ndeplinesc funcÈ›ii vitale pentru organism.</li>
      <li>La plante identificÄƒm urmÄƒtoarele organe principale:
        <ul>
          <li><strong>RÄƒdÄƒcina</strong> - asigurÄƒ fixarea plantei Ã®n sol È™i absorbÈ›ia apei È™i substanÈ›elor nutritive</li>
          <li><strong>Tulpina</strong> - susÈ›ine planta È™i transportÄƒ substanÈ›ele Ã®ntre rÄƒdÄƒcinÄƒ È™i frunze</li>
          <li><strong>Frunza</strong> - organul principal de fotosintezÄƒ, transformÄƒ lumina solarÄƒ Ã®n energie chimicÄƒ</li>
          <li><strong>Floarea</strong> - organul reproducÄƒtor, conÈ›ine pÄƒrÈ›i masculine È™i feminine</li>
          <li><strong>Fructul È™i seminÈ›ele</strong> - asigurÄƒ dispersia È™i germinarea noilor plante</li>
        </ul>
      </li>
      <li>La animale organele se grupeazÄƒ Ã®n sisteme/aparate specializate:
        <ul>
          <li><strong>Sistemul digestiv</strong> - proceseazÄƒ alimentele È™i extrage nutrienÈ›ii (stomac, intestin, ficat)</li>
          <li><strong>Sistemul respirator</strong> - asigurÄƒ schimbul de gaze oxigen È™i dioxid de carbon (plÄƒmÃ¢ni, trahee)</li>
          <li><strong>Sistemul circulator</strong> - transportÄƒ substanÈ›ele prin corp (inima, vasele de sÃ¢nge)</li>
          <li><strong>Sistemul excretor</strong> - eliminÄƒ deÈ™eurile din organism (rinichi, vezica urinarÄƒ)</li>
          <li><strong>Sistemul reproducÄƒtor</strong> - asigurÄƒ continuarea speciei (organe genitale masculine È™i feminine)</li>
          <li><strong>Sistemul nervos</strong> - coordoneazÄƒ activitÄƒÈ›ile organismului (creier, mÄƒduva spinÄƒrii, nervi)</li>
        </ul>
      </li>
      <li>FuncÈ›iile vitale ale organismelor se Ã®mpart Ã®n trei categorii:
        <ul>
          <li><strong>FuncÈ›ii de nutriÈ›ie</strong> - respiraÈ›ia, digestia, circulaÈ›ia, excreÈ›ia</li>
          <li><strong>FuncÈ›ii de relaÈ›ie</strong> - sistemul nervos, organele de simÈ›, miÈ™carea</li>
          <li><strong>FuncÈ›ii de reproducere</strong> - perpetuarea speciei prin formarea de descendenÈ›i</li>
        </ul>
      </li>
      <li>Organele nu funcÈ›ioneazÄƒ independent - ele colaboreazÄƒ Ã®n cadrul sistemelor pentru menÈ›inerea vieÈ›ii.</li>
      <li>Adaptarea organelor la mediu È™i funcÈ›ie este rezultatul evoluÈ›iei pe perioade lungi de timp.</li>
    </ul>
  </div>

  <h2>ğŸ“ Test â€“ 9 itemi</h2>

  <div class="intrebare">
    <p><strong>1. Ce organ vegetal realizeazÄƒ fotosinteza?</strong></p>
    <div class="raspunsuri">
      <button onclick="verifica(this, true)">Frunza</button>
      <button onclick="verifica(this, false)">Tulpina</button>
      <button onclick="verifica(this, false)">Floarea</button>
      <button onclick="verifica(this, false)">RÄƒdÄƒcina</button>
    </div>
  </div>

  <div class="intrebare">
    <p><strong>2. Ce organ animal este responsabil cu pomparea sÃ¢ngelui?</strong></p>
    <div class="raspunsuri">
      <button onclick="verifica(this, false)">PlÄƒmÃ¢nul</button>
      <button onclick="verifica(this, false)">Ficatul</button>
      <button onclick="verifica(this, true)">Inima</button>
      <button onclick="verifica(this, false)">Rinichiul</button>
    </div>
  </div>

  <div class="intrebare">
    <p><strong>3. CompleteazÄƒ: RÄƒdÄƒcina are rol de __________ È™i absorbÈ›ie.</strong></p>
    <input id="c1" placeholder="rÄƒspunsul tÄƒu" type="text"/>
    <button onclick="verificaCompletare('c1', 'fixare')">VerificÄƒ</button>
    <p class="feedback" id="f1"></p>
  </div>

  <div class="intrebare">
    <p><strong>4. Alege organele implicate Ã®n funcÈ›ia de relaÈ›ie:</strong></p>
    <label><input id="cb1" type="checkbox"> Sistem nervos</label><br/>
    <label><input id="cb2" type="checkbox"/> Sistem reproducÄƒtor</label><br/>
    <label><input id="cb3" type="checkbox"/> Organe de simÈ›</label><br/>
    <label><input id="cb4" type="checkbox"/> Sistem circulator</label><br/>
    <button onclick="verificaCheckbox()">VerificÄƒ</button>
    <p class="feedback" id="f2"></p>
  </div>

  <div class="intrebare">
    <p><strong>5. CompleteazÄƒ: Organul reproducÄƒtor al plantelor este __________.</strong></p>
    <input id="c2" placeholder="rÄƒspunsul tÄƒu" type="text"/>
    <button onclick="verificaCompletare('c2', 'floarea')">VerificÄƒ</button>
    <p class="feedback" id="f3"></p>
  </div>

  <div class="intrebare">
    <p><strong>6. Ce este un organ?</strong></p>
    <input id="r1" placeholder="rÄƒspunsul tÄƒu" type="text"/>
    <button onclick="verificaScurt()">VerificÄƒ</button>
    <p class="feedback" id="f4"></p>
  </div>

  <div class="intrebare">
    <p><strong>7. AsociazÄƒ fiecare organ cu funcÈ›ia principalÄƒ:</strong></p>
    <label>Frunza â†’ 
      <select id="a1">
        <option value="">SelecteazÄƒ</option>
        <option value="fotosinteza">FotosintezÄƒ</option>
        <option value="reproducere">Reproducere</option>
      </select>
    </label><br/>
    <label>Floarea â†’ 
      <select id="a2">
        <option value="">SelecteazÄƒ</option>
        <option value="fotosinteza">FotosintezÄƒ</option>
        <option value="reproducere">Reproducere</option>
      </select>
    </label><br/>
    <button onclick="verificaAsociere()">VerificÄƒ</button>
    <p class="feedback" id="f5"></p>
  </div>

  <div class="intrebare">
    <p><strong>8. CompleteazÄƒ: Sistemul respirator are rolul de a asigura schimbul de __________.</strong></p>
    <input id="oxigen" placeholder="rÄƒspunsul tÄƒu" type="text"/>
    <button onclick="verificaCompletare('oxigen', 'gaze')">VerificÄƒ</button>
    <p class="feedback" id="f6"></p>
  </div>

  <div class="intrebare">
    <p><strong>9. AsociazÄƒ fiecare organ cu funcÈ›ia principalÄƒ:</strong></p>
    <label>Rinichi â†’
      <select id="a_org1">
        <option value="">SelecteazÄƒ</option>
        <option value="filtrare">Filtrarea sÃ¢ngelui</option>
        <option value="digestie">Digestie</option>
      </select>
    </label><br/>
    <label>Stomac â†’
      <select id="a_org2">
        <option value="">SelecteazÄƒ</option>
        <option value="filtrare">Filtrarea sÃ¢ngelui</option>
        <option value="digestie">Digestie</option>
      </select>
    </label><br/>
    <button onclick="verificaAsociereOrgane()">VerificÄƒ</button>
    <p class="feedback" id="f7"></p>
  </div>

  <button onclick="afiseazaFeedbackFinal()">âœ… Vezi rezultatul final</button>
  <p class="rezultat" id="rezultatFinal"></p>
  <a class="back" href="../index.html">â† Ãnapoi la meniu</a>
</div>

<script>
let scor = 0;
let completari = {};

function verifica(elem, corect) {
  elem.disabled = true;
  elem.classList.remove('corect', 'gresit');
  elem.classList.add(corect ? 'corect' : 'gresit');
  elem.parentElement.querySelectorAll('button').forEach(b => b.disabled = true);
  if (corect) scor++;
}

function verificaCompletare(id, rasp) {
  const val = document.getElementById(id).value.trim().toLowerCase();
  const feedbackIds = {
    'c1': 'f1',
    'c2': 'f3', 
    'oxigen': 'f6'
  };
  const f = document.getElementById(feedbackIds[id]);
  const esteCorect = val === rasp.toLowerCase();
  f.innerText = esteCorect ? 'âœ”ï¸ Corect' : `âŒ RÄƒspuns corect: ${rasp}`;
  f.style.color = esteCorect ? 'green' : 'red';
  if (!completari[id] && esteCorect) { 
    scor++; 
    completari[id] = true; 
  }
}

function verificaCheckbox() {
  const r = [true, false, true, false]; // Sistem nervos È™i organe de simÈ› sunt pentru relaÈ›ie
  const a = [
    document.getElementById('cb1').checked, 
    document.getElementById('cb2').checked, 
    document.getElementById('cb3').checked, 
    document.getElementById('cb4').checked
  ];
  const f = document.getElementById('f2');
  const e = JSON.stringify(r) === JSON.stringify(a);
  f.innerText = e ? 'âœ”ï¸ Corect' : 'âŒ Corect: sistem nervos È™i organe de simÈ›.';
  f.style.color = e ? 'green' : 'red';
  if (e && !completari['checkbox']) { 
    scor++; 
    completari['checkbox'] = true; 
  }
}

function verificaScurt() {
  const val = document.getElementById('r1').value.toLowerCase();
  const f = document.getElementById('f4');
  const cheiUvinte = ['È›esut', 'func', 'grup'];
  const esteCorect = cheiUvinte.some(cuv => val.includes(cuv));
  
  if (esteCorect) {
    f.innerText = 'âœ”ï¸ Corect';
    f.style.color = 'green';
    if (!completari['r1']) {
      scor++;
      completari['r1'] = true;
    }
  } else {
    f.innerText = 'âŒ RÄƒspuns corect: Un organ este o grupare de È›esuturi care Ã®ndeplineÈ™te o funcÈ›ie Ã®n organism.';
    f.style.color = 'red';
  }
}

function verificaAsociere() {
  const a1 = document.getElementById('a1').value;
  const a2 = document.getElementById('a2').value;
  const f = document.getElementById('f5');
  const e = (a1 === 'fotosinteza' && a2 === 'reproducere');
  f.innerText = e ? 'âœ”ï¸ Corect' : 'âŒ Frunza â†’ fotosintezÄƒ, Floarea â†’ reproducere.';
  f.style.color = e ? 'green' : 'red';
  if (e && !completari['asociere']) {
    scor++;
    completari['asociere'] = true;
  }
}

function verificaAsociereOrgane() {
  const r1 = document.getElementById('a_org1').value;
  const r2 = document.getElementById('a_org2').value;
  const f = document.getElementById('f7');
  const e = (r1 === 'filtrare' && r2 === 'digestie');
  f.innerText = e ? 'âœ”ï¸ Corect' : 'âŒ Rinichi â†’ filtrare, Stomac â†’ digestie';
  f.style.color = e ? 'green' : 'red';
  if (e && !completari['asocorg']) {
    scor++;
    completari['asocorg'] = true;
  }
}

async function adaugaXP(puncte) {
  // Simulare salvare XP (Ã®n mediul real ar fi conectat la Firebase)
  console.log(`XP adÄƒugat: ${puncte}`);
  // Aici ar fi codul pentru Firebase din originalul tÄƒu
}

function afiseazaFeedbackFinal() {
  const procent = (scor / 9) * 100;
  let mesaj = '';
  if (procent >= 90) mesaj = 'ğŸŒŸ Excelent! Ai Ã®nÈ›eles foarte bine materia!';
  else if (procent >= 70) mesaj = 'ğŸ‘ Bine! Mai exerseazÄƒ cÃ¢teva concepte.';
  else if (procent >= 50) mesaj = 'ğŸ™‚ Mai este loc de Ã®mbunÄƒtÄƒÈ›ire. ReciteÈ™te lecÈ›ia.';
  else mesaj = 'âš ï¸ ÃÈ›i recomandÄƒm sÄƒ reiei teoria pas cu pas.';
  document.getElementById('rezultatFinal').innerText = `${mesaj} Ai obÈ›inut ${scor} din 9 rÄƒspunsuri corecte.`;

  const xpDeAdaugat = scor * 10; // 10 XP pe rÄƒspuns corect
  adaugaXP(xpDeAdaugat);
}

// Google Translate init
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'ro',
    includedLanguages: 'en,hu',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}

// Text-to-Speech (TTS)
const ttsButton = document.getElementById('tts-button');
let synth = window.speechSynthesis;
let voceCitita = false;

ttsButton.addEventListener('click', () => {
  if (voceCitita) {
    synth.cancel();
    ttsButton.textContent = "ğŸ”Š AscultÄƒ";
    voceCitita = false;
  } else {
    let text = document.getElementById('teorie-esentiala').innerText;
    let utterThis = new SpeechSynthesisUtterance(text);
    utterThis.lang = 'ro-RO';
    utterThis.rate = 1;
    utterThis.pitch = 1;
    utterThis.onend = () => {
      ttsButton.textContent = "ğŸ”Š AscultÄƒ";
      voceCitita = false;
    };
    synth.speak(utterThis);
    ttsButton.textContent = "â¸ï¸ OpreÈ™te";
    voceCitita = true;
  }
});
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</body>
</html>